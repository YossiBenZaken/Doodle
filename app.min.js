document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".grid"),e=document.createElement("div");let l,o,n,r,a=50,s=150,c=s,i=!1,d=5,f=[],v=!0,m=!1,u=!1,h=0;class p{constructor(e){this.bottom=e,this.left=315*Math.random(),this.visual=document.createElement("div");const l=this.visual;l.classList.add("platform"),l.style.left=this.left+"px",l.style.bottom=this.bottom+"px",t.appendChild(l)}}function I(){c>200&&f.forEach(t=>{if(t.bottom-=4,t.visual.style.bottom=t.bottom+"px",t.bottom<10){f[0].visual.classList.remove("platform"),f.shift(),h++;let t=new p(600);f.push(t)}})}function y(){clearInterval(o),v=!0,l=setInterval(()=>{c+=20,e.style.bottom=c+"px",c>s+200&&(clearInterval(l),v=!1,o=setInterval(()=>{c-=5,e.style.bottom=c+"px",c<=0&&function(){for(console.log("Game Over"),i=!0;t.firstChild;)t.removeChild(t.firstChild);t.innerHTML=h,clearInterval(l),clearInterval(o),clearInterval(n),clearInterval(r)}(),f.forEach(t=>{c>=t.bottom&&c<=t.bottom+15&&a+87>=t.left&&a<=t.left+85&&!v&&(console.log("landed"),s=c,y())})},30))},30)}function b(t){"ArrowLeft"===t.key?x():"ArrowRight"===t.key?L():"ArrowUp"===t.key&&(m=u=!1,clearInterval(n),clearInterval(r))}function x(){u&&(clearInterval(r),u=!1),m=!0,n=setInterval(()=>{a>=0?(a-=5,e.style.left=a+"px"):L()},20)}function L(){m&&(clearInterval(n),m=!1),u=!0,r=setInterval(()=>{a<=340?(a+=5,e.style.left=a+"px"):x()},20)}function C(){t.querySelectorAll("div").forEach(e=>{0==e.classList.length&&t.removeChild(e)})}i||(function(){for(let t=0;t<d;t++){let e=new p(100+t*(600/d));f.push(e),console.log(f)}}(),t.appendChild(e),e.classList.add("doodler"),a=f[0].left,e.style.left=a+"px",e.style.bottom=c+"px",setInterval(I,30),y(),document.addEventListener("keyup",b),setInterval(C,1e3))});